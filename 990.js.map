{"version":3,"file":"990.js","sources":["./node_modules/react/cjs/react-jsx-runtime.production.min.js","./node_modules/react/jsx-runtime.js","./src/App.js","./src/data.js","./src/utils.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import React from \"react\";\nimport { markets, symbols } from \"./data\";\nimport { getData, tickerUI } from \"./utils\";\n\nexport const init = async ({ drawKey, getConfig }) => {\n  const fetchDataAndDraw = async () => {\n    let { symbol, market, type } = getConfig();\n    let fn = type == \"stocks\" ? \"TIME_SERIES_DAILY\" : \"DIGITAL_CURRENCY_DAILY\";\n    const result = await getData({ fn, symbol, market, type });\n    console.log({ result });\n    drawKey((arg) => tickerUI(arg, result));\n  };\n\n  fetchDataAndDraw();\n\n  const interval = setInterval(async () => {\n    fetchDataAndDraw();\n  }, 3456000); // every 1 hour\n\n  return () => {\n    clearInterval(interval);\n  };\n};\n\nexport const manifest = {\n  version: 1,\n  bespoke: true,\n};\n\nconst App = ({ config, setConfig }) => {\n  const onChange = (e) =>\n    setConfig({ ...config, [e.target.name]: e.target.value });\n\n  return (\n    <div className=\"webdeck-plugin\" style={{ background: \"purple\" }}>\n      <h3 className=\"webdeck-title\">Webdeck Stocks Plugin</h3>\n      <div className=\"webdeck-setting\">\n        <label htmlFor=\"type\">type: </label>\n        <select\n          required\n          name=\"type\"\n          onChange={onChange}\n          value={config.type || \"\"}\n        >\n          <option value=\"\" disabled hidden>\n            select...\n          </option>\n          <option value=\"crypto\">crypto </option>\n          <option value=\"stocks\" disabled>\n            stocks\n          </option>\n        </select>\n      </div>\n      <div className=\"webdeck-setting\">\n        <label htmlFor=\"symbol\">symbol: </label>\n        <select\n          required\n          name=\"symbol\"\n          onChange={onChange}\n          value={config.symbol || \"\"}\n        >\n          <option value=\"\" disabled hidden>\n            select...\n          </option>\n          {symbols[config?.type]?.map((s) => (\n            <option key={s} value={s.split(\",\")[0]}>\n              {s.split(\",\")[1]}\n            </option>\n          ))}\n        </select>\n      </div>\n      <div className=\"webdeck-setting\">\n        <label htmlFor=\"market\">market: </label>\n        <select\n          required\n          name=\"market\"\n          onChange={onChange}\n          value={config.market || \"\"}\n        >\n          <option value=\"\" disabled hidden>\n            select...\n          </option>\n          {markets.map((m) => (\n            <option key={m} value={m.split(\",\")[0]}>\n              {m.split(\",\")[1]}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","export const markets = [\n  \"AUD,Australian Dollar\",\n  \"CAD,Canadian Dollar\",\n  \"CHF,Swiss Franc\",\n  \"CNY,Chinese Yuan\",\n  \"EUR,Euro\",\n  \"GBP,British Pound Sterling\",\n  \"RUB,Russian Ruble\",\n  \"USD,United States Dollar\",\n];\n\nexport const symbols = {\n  stocks: [\n    \"AAPL,Apple Inc\",\n    \"ADBE,Adobe Inc\",\n    \"AMD,Advanced Micro Devices, Inc\",\n    \"AMZN,Amazon.com, Inc\",\n    \"ASML,ASML Holding N.V\",\n    \"AVGO,Broadcom Inc\",\n    \"COST,Costco Wholesale Corporation\",\n    \"CSCO,Cisco Systems, Inc\",\n    \"GOOG,Alphabet Inc. (Class C)\",\n    \"GOOGL Alphabet Inc. (Class A)\",\n    \"INTC,Intel Corporation\",\n    \"META,Meta Platforms Inc\",\n    \"MSFT,Microsoft Corporation\",\n    \"NFLX,Netflix Inc\",\n    \"NVDA,NVIDIA Corporation\",\n    \"PEP,PepsiCo Inc.\",\n    \"PYPL,PayPal Holdings Inc\",\n    \"QCOM,Qualcomm Incorporated\",\n    \"TSLA,Tesla Inc\",\n    \"TXN,Texas Instruments Incorporated\",\n  ],\n  crypto: [\n    \"AAVE,Aave\",\n    \"ADA,Cardano\",\n    \"ATOM,Cosmos\",\n    \"AVAX,Avalanche\",\n    \"BNB,Binance-Coin\",\n    \"BTC,Bitcoin\",\n    \"BUSD,Binance-USD\",\n    \"CAKE,PancakeSwap\",\n    \"COMP,Compound\",\n    \"DAI,Dai\",\n    \"DASH,Dash\",\n    \"DOGE,DogeCoin\",\n    \"DOT,Polkadot\",\n    \"ELIX,Elixir\",\n    \"EOS,EOS\",\n    \"ETH,Ethereum\",\n    \"LINK,ChainLink\",\n    \"LTC,Litecoin\",\n    \"MATIC,Polygon\",\n    \"NEO,NEO\",\n    \"UNI,Uniswap\",\n    \"UST,TerraUSD\",\n    \"XRP,Ripple\",\n    \"XZC,ZCoin\",\n  ],\n};\n","const keys = {\n  data: \"Time Series (Digital Currency Daily)\",\n  value: \"4. close\",\n  meta: \"Meta Data\",\n  a: \"2. Digital Currency Code\",\n  b: \"4. Market Code\",\n};\n\nconst parseData = (data) => {\n  const parsedData = {};\n  console.log(\"DDDATRAA\", data);\n  try {\n    const meta = data[keys.meta];\n    parsedData.name = `${meta[keys.a]}-${meta[keys.b]}`;\n    parsedData.data = data[keys.data];\n    parsedData.arr = Object.values(parsedData.data)\n      .map((value) => {\n        const price = value[keys.value];\n        return price;\n      })\n      .reverse();\n    console.log({ F: true, parsedData });\n    return parsedData;\n  } catch (e) {\n    return parsedData;\n  }\n};\n\nconst DB = sessionStorage.getItem(\"stockdb\");\n\nexport const getData = ({ type, fn, symbol, market }) => {\n  return new Promise(async (resolve, reject) => {\n    switch (type) {\n      case \"stocks\":\n        resolve({});\n        break;\n      case \"crypto\":\n        if (DB) return resolve(JSON.parse(DB));\n        let url = `https://www.alphavantage.co/query?function=${fn}&symbol=${symbol}&market=${market}&apikey=BSYOR5SXYSHVA229\"`;\n        const result = await fetch(url);\n        const data = await result.json();\n        console.log(\"crypto data\", data);\n        const parsedData = parseData(data);\n        sessionStorage.setItem(\"stockdb\", JSON.stringify(parsedData));\n        resolve(parsedData);\n        break;\n      default:\n        reject({});\n    }\n  });\n};\n\nexport const tickerUI = ({ canvas, ctx }, data) => {\n  console.log({ data });\n\n  // draw grapgh\n  drawGraph(ctx, data.arr);\n\n  // draw title\n  drawCenterText(\n    ctx,\n    canvas,\n    parseFloat(data.arr[data.arr.length - 1]).toFixed(2)\n  );\n\n  // drop top tilte\n  drawTopText(ctx, canvas, data.name);\n};\n\nconst drawGraph = (ctx, dataArrInput) => {\n  var GRAPH_TOP = 50;\n  var GRAPH_BOTTOM = 52;\n  var GRAPH_LEFT = 5;\n  var GRAPH_RIGHT = 70;\n\n  var GRAPH_HEIGHT = 22;\n  var GRAPH_WIDTH = 72;\n  var dataArr = dataArrInput || [6, 8, 10, 12, 11, 7, 5, 8, 11, 5, 2, 3, 4, 6];\n  var arrayLen = dataArr.length;\n\n  // calculate largest piece of data\n  var largest = 0;\n  for (var i = 0; i < arrayLen; i++) {\n    if (dataArr[i] > largest) {\n      largest = dataArr[i];\n    }\n  }\n\n  ctx.beginPath();\n  // make your graph look less jagged\n  ctx.lineJoin = \"round\";\n  ctx.strokeStyle = \"green\";\n  // add first point in the graph\n  ctx.moveTo(\n    GRAPH_LEFT,\n    GRAPH_HEIGHT - (dataArr[0] / largest) * GRAPH_HEIGHT + GRAPH_TOP\n  );\n  // loop over data and add points starting from the 2nd index in the array as the first has been added already\n  for (var i = 1; i < arrayLen; i++) {\n    ctx.lineTo(\n      (GRAPH_RIGHT / arrayLen) * i + GRAPH_LEFT,\n      GRAPH_HEIGHT - (dataArr[i] / largest) * GRAPH_HEIGHT + GRAPH_TOP\n    );\n  }\n  // actually draw the graph\n  ctx.stroke();\n};\n\nconst drawCenterText = (ctx, canvas, price) => {\n  ctx.fillStyle = \"#FFF\";\n  ctx.font = \"14px sans-serif\";\n\n  var textString = price,\n    textWidth = ctx.measureText(textString).width;\n\n  ctx.fillText(\n    textString,\n    canvas.width / 2 - textWidth / 2,\n    canvas.height / 2 + 5,\n    canvas.width\n  );\n};\n\nconst drawTopText = (ctx, canvas, title) => {\n  ctx.fillStyle = \"rgba(255, 255, 255, 0.5)\";\n  ctx.font = \"10px sans-serif\";\n\n  var textString = title,\n    textWidth = ctx.measureText(textString).width;\n\n  ctx.fillText(textString, canvas.width / 2 - textWidth / 2, 15, canvas.width);\n};\n"],"names":[],"mappings":"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"}